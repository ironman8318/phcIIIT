<style type="text/css">
    tr:nth-child(even){
        background-color: #eee;
    }

    th{
        background-color: #337ab7;
        color:white;
    }

    tr{
        transition: all .2s;
    }
    .table-hover>tbody>tr:hover {
    background-color: #c0d1ff;

}


</style>



<div class="wrapper">
    <div id="here1">
    <!-- Sidebar Holder -->

    <div id="here">
        
        <!-- Page Content Holder -->
        <div id="content" style="background-image: url('/image/about-bg2.png');background-color: lightblue;height:auto">
            
            <div class="tab-content" style="margin-top: 3%">
                          
                          <div id="profile" class="tab-pane fade">
                   
                </div>
               
              
                <!-- Start Show All Medicines -->
                
                <!-- End Show All Medicines -->
                <div id="addPatients" class="tab-pane fade in active">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1 col-sm-12 col-xs-12">
                                <!-- Add Patient -->
                                <div class="box box-primary" style="padding: 0px;background-color: #56baed;">
                                    <div class="row">
                                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                            <div class="single_member" style="padding-left: 5%;margin-top: 25%">
                                                <div class="author">
                                                    <img src="/image/patient.png" alt="">
                                                </div>
                                                <div class="author_decs">
                                                    <h4>Add patients</h4>
                                                    <hr>
                                                    <p>Student/Employee</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12" style="background-color: #FDFEFE;border-top-right-radius: 10px;border-bottom-right-radius: 10px;box-shadow: 3px 0px #EAEDED  ;">
                                            <br>
                                            
                                            <div class="tab-content">
                                                <div id="student" class="tab-pane fade in active">
                                                    <form autocomplete="off" role="form" class="form-horizontal" method="post" id="add-student">
                                                        <div class="single_member">
                                                            <br>
                                                            <br>
                                                            <div class="author_decs">
                                                                <div class="form-group">
                                                                    <input type="number" class="form-control" id="rollnumber" placeholder="Roll Number" min="1" required style="border-radius: 5px" value="{{patient.idnumber}}">
                                                                </div>
                                                                <div class="form-group">
                                                                    <input type="text" class="form-control" id="diseases" placeholder="Disease Name(Optional)" style="border-radius: 5px"
                                                                    value="{{patient.diseases}}">
                                                                </div>
                                                                <div class="form-group" >
                                                                    <textarea rows="4" placeholder="Description of Disease(Optional)" class="form-control" name="diseaseDescription"    id="diseaseDescription" width>{{patient.diseaseDescription}}</textarea>
                                                                </div>
                                                                <div class="form-group">
                                                                    <select class="form-control" id="doctorName" style="border-radius: 5px">
                                                                        <option selected>{{patient.doctorName}}</option>
                                                                        <option value="Dr. G.S. Sandhu">Dr. G.S. Sandhu</option>
                                                                        <option value="Dr. A.N .Gupta">Dr. A.N .Gupta</option>
                                                                        <option value="Dr. Jyoti Garg">Dr. Jyoti Garg</option>
                                                                        <option value="Dr. Niharika Gupta">Dr. Niharika Gupta</option>
                                                                        <option value="N/A">N/A</option>
                                                                    </select>
                                                                </div>
                                                                <div class="form-group">
                                                                    <div id="more">
                                                                   
                                                                       <!--  <div class="row">
                                                                            <div class="col-md-9 col-sm- col-xs-12">
                                                                                <input type="text" class="form-control" placeholder="Medicine Name" required id="medicineName0" style="border-radius: 5px">
                                                                            </div>
                                                                            <div class="col-md-3 col-sm- col-xs-12">
                                                                                <input type="number" class="form-control" placeholder="quantity" required id="medicineQuantity0" style="border-radius: 5px" min="1">
                                                                            </div>
                                                                            <div role="button" class="btn btndanger delmedicine"></div>
                                                                        </div> -->

                                                                    </div>
                                                                    <br>
                                                                    <a class="btn btn-primary pull-right" id="btn2"><i class="fa fa-plus-circle" aria-hidden="true"></i> Add More</a>
                                                                    <div id="count"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <hr>
                                                        <div id="comments"></div>
                                                        <center>
                                                            <div id="show">
                                                                <button class="btn text-uppercase btn-success" style="box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);" type="submit"><i class="fa fa-paper-plane" aria-hidden="true"></i> Submit</button>
                                                            </div>
                                                            <div id="showdisable">
                                                                <button class="btn text-uppercase btn-success disabled" style="box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);" type="submit"><i class="fa fa-paper-plane" aria-hidden="true"></i> Submit</button>
                                                            </div>
                                                        </center>
                                                        <br>
                                                    </form>
                                                </div>
                                                
                                              
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
               
                 <div id="studentinfo" class="tab-pane fade">
                    <div class="container-fluid" style="background-color: #EAF2F8  ;margin-top:-1%">
                        <div class="row">
                            <div class="col-md-10 col-md-offset-1">
                                <div class="panel panel-primary filterable">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Search</h3>
                                        <div class="pull-right">
                                            <but
                                            ton class="btn btn-default btn-xs"><span class="glyphicon glyphicon-filter"></span> Filter</button>
                                        </div>
                                    </div>
                                
                                </div>
                            </div>
                        </div>
                        <table id="studentInformation"  class="table table-striped table-hover table-bordered">
                                  
                                  <thead>
                                    <tr>
                                      <th scope="col">Roll Number</th>
                                      <th scope="col">Name</th>
                                      <th scope="col">Date</th>
                                      <th scope="col">Doctor</th>
                                      
                                      <th scope="col">Medicine</th>
                                      <th scope="col">Editing</th>

                                    </tr>
                                  </thead>
                                  <tbody>
                                    {{#if patients}}
                                    {{#each patients}}
                                    {{#iff this.patientType '==' 'Student'}}
                                    <tr class="filterable">
                                      <td style="text-align: center;">{{this.idnumber}}</td>
                                      
                                      <td style="text-align: center;">{{this.patientName}}</td>
                                      <td style="text-align: center;">{{this.dateFormat.datenum}}/{{this.dateFormat.month}}/{{this.dateFormat.year}} {{this.dateFormat.dayName}}</td>
                                      
                                      <td style="text-align: center;">{{this.doctorName}}</td>
                                      <td style="text-align: center;"><ol>
                                                    {{#each this.medicineName}}
                                                    <div class="row">
                                                        <li>
                                                            <div class="col-sm-6 col-xs-12">
                                                                {{this.name}}
                                                            </div>
                                                            <div class="col-sm-6 col-xs-12">
                                                                qty {{this.quantity}}
                                                            </div>
                                                        </li>
                                                    </div>
                                                    {{/each}}
                                                </ol></td>
                                        <td><a href="/patient/edit/{{this._id}}" class="btn btn-small btn-info">Edit</a></td>

                                    </tr>
                                    {{/iff}}
                                        {{/each}}
                                        {{else}}
                                        <center>
                                            <h4>No Data Found</h4>
                                        </center>
                                        {{/if}}
                                    
                                  </tbody>
                                        
                                </table>

                    </div>
                </div>

                <div id="facultyinfo" class="tab-pane fade">
                    <div class="container-fluid" style="background-color: #EAF2F8  ;margin-top:-1%">
                        <div class="row">
                            <div class="col-md-10 col-md-offset-1">
                                <div class="panel panel-primary filterable">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Search</h3>
                                        <div class="pull-right">
                                            <but
                                            ton class="btn btn-default btn-xs"><span class="glyphicon glyphicon-filter"></span> Filter</button>
                                        </div>
                                    </div>
                                    <table class="table">
                                        <thead>
                                            <tr class="filters">
                                                <th><input type="number" class="form-control" placeholder="PF Number" id="myInput500 "></th>
                                                <th><input type="text" class="form-control" placeholder="Name" id="myInput501"></th>
                                                <th><input type="text" class="form-control" placeholder="dd/mm/yyyy" id="myInput502"></th>
                                                <th><input type="text" class="form-control" placeholder="Doctor Name" id="myInput503"></th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <table id="facultyInformation"  class="table table-striped table-hover table-bordered">
                                  
                                  <thead>
                                    <tr>
                                      <th scope="col">PF Number</th>
                                      <th scope="col">Name</th>
                                      <th scope="col">Date</th>
                                      <th scope="col">Doctor</th>
                                      
                                      <th scope="col">Medicine</th>

                                    </tr>
                                  </thead>
                                  <tbody>
                                    {{#if patients}}
                                    {{#each patients}}
                                    {{#iff this.patientType '==' 'Faculty'}}
                                    <tr class="filterable">
                                      <td style="text-align: center;">{{this.idnumber}}</td>
                                      
                                      <td style="text-align: center;">{{this.patientName}}</td>
                                      <td style="text-align: center;">{{this.dateFormat.datenum}}/{{this.dateFormat.month}}/{{this.dateFormat.year}} {{this.dateFormat.dayName}}</td>
                                      
                                      <td style="text-align: center;">{{this.doctorName}}</td>
                                      <td style="text-align: center;"><ol>
                                                    {{#each this.medicineName}}
                                                    <div class="row">
                                                        <li>
                                                            <div class="col-sm-6 col-xs-12">
                                                                {{this.name}}
                                                            </div>
                                                            <div class="col-sm-6 col-xs-12">
                                                                qty {{this.quantity}}
                                                            </div>
                                                        </li>
                                                    </div>
                                                    {{/each}}
                                                </ol></td>
                                    </tr>
                                    {{/iff}}
                                        {{/each}}
                                        {{else}}
                                        <center>
                                            <h4>No Data Found</h4>
                                        </center>
                                        {{/if}}
                                    
                                  </tbody>
                                        
                                </table>

                    </div>
                </div>


                    <div id="researchinfo" class="tab-pane fade">
                    <div class="container-fluid" style="background-color: #EAF2F8  ;margin-top:-1%">
                        <div class="row">
                            <div class="col-md-10 col-md-offset-1">
                                <div class="panel panel-primary filterable">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Search</h3>
                                        <div class="pull-right">
                                            <but
                                            ton class="btn btn-default btn-xs"><span class="glyphicon glyphicon-filter"></span> Filter</button>
                                        </div>
                                    </div>
                                    <table class="table">
                                        <thead>
                                            <tr class="filters">
                                                <th><input type="number" class="form-control" placeholder="PF Number" id="myInput524 "></th>
                                                <th><input type="text" class="form-control" placeholder="Name" id="myInput525"></th>
                                                <th><input type="text" class="form-control" placeholder="dd/mm/yyyy" id="myInput526"></th>
                                                <th><input type="text" class="form-control" placeholder="Doctor Name" id="myInput527"></th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <table id="researchInformation"  class="table table-striped table-hover table-bordered">
                                  
                                  <thead>
                                    <tr>
                                      <th scope="col">PF Number</th>
                                      <th scope="col">Name</th>
                                      <th scope="col">Date</th>
                                      <th scope="col">Doctor</th>
                                      
                                      <th scope="col">Medicine</th>

                                    </tr>
                                  </thead>
                                  <tbody>
                                    {{#if patients}}
                                    {{#each patients}}
                                    {{#iff this.patientType '==' 'ResearchStaff'}}
                                    <tr class="filterable">
                                      <td style="text-align: center;">{{this.idnumber}}</td>
                                      
                                      <td style="text-align: center;">{{this.patientName}}</td>
                                      <td style="text-align: center;">{{this.dateFormat.datenum}}/{{this.dateFormat.month}}/{{this.dateFormat.year}} {{this.dateFormat.dayName}}</td>
                                      
                                      <td style="text-align: center;">{{this.doctorName}}</td>
                                      <td style="text-align: center;"><ol>
                                                    {{#each this.medicineName}}
                                                    <div class="row">
                                                        <li>
                                                            <div class="col-sm-6 col-xs-12">
                                                                {{this.name}}
                                                            </div>
                                                            <div class="col-sm-6 col-xs-12">
                                                                qty {{this.quantity}}
                                                            </div>
                                                        </li>
                                                    </div>
                                                    {{/each}}
                                                </ol></td>
                                    </tr>
                                    {{/iff}}
                                        {{/each}}
                                        {{else}}
                                        <center>
                                            <h4>No Data Found</h4>
                                        </center>
                                        {{/if}}
                                    
                                  </tbody>
                                        
                                </table>

                    </div>
                </div>
              
            </div>
        </div>
    </div>
</div>



    </div>
</div>
<footer class="footer-area" style="margin-bottom: 0px">
    <div class="footer-bottom" style="background-color: #154360;color:#B3B6B7  ">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center flex-wrap">
                <div class="footer-social d-flex  ">
                    <div class="row">
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <center>
                                Copyright &copy;<script>
                                document.write(new Date().getFullYear());
                                </script> IIITDM JABALPUR
                            </center>
                        </div>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <center>
                                <i class="fa fa-user"></i> Anuj Srivastava
                                <a href="https://www.facebook.com/anuj.srivastava.71404" target="blank"><i class="fa fa-facebook"></i></a>
                                <a href="https://github.com/Anujsri" target="blank" ><i class="fa fa-github"></i></a>
                                <a  href="https://www.linkedin.com/in/anuj-srivastava-5ba457137/" target="blank"><i class="fa fa-linkedin"></i></a>
                            </center>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- <script src="/socket.io/socket.io.js"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
<script src="../js/compounder.js"></script>
<script src="../js/tej.js"></script>

<script>
// var moreHtml = '<div class="row "><div class="col-md-8 col-sm-8 col-xs-12">'+
//         '<input type="text" list="datalist"  class="form-control"  placeholder="Medicine Name"   required id="employeemedicineName' + 0 + '">'+
//         '</div><div class="col-md-4 col-sm-4 col-xs-12">'+
//         '<input type="number"  class="form-control"  placeholder="Medicine quantity"   required id="employeemedicineQuantity' + 0 + '">'+
//         '</div><button onclick="hello(this);" class="delmedicine my-2 btn btn-xs "></button></div>'
var moreHtml = "";
 for(i=0 ; i<{{patient.medicineName.length}} ; i++){
     moreHtml += '<div class="row "><div class="col-md-8 col-sm-8 col-xs-12">'+
'<input type="text" list="datalist"  class="form-control" ' 
        + 'placeholder="Medicine Name"   required id="employeemedicineName' + i + '">'+
        '</div><div class="col-md-4 col-sm-4 col-xs-12">'+
        '<input type="number"  class="form-control"  placeholder="Medicine quantity"   required id="employeemedicineQuantity' + i + '">'+
        '</div><button onclick="hello(this);" class="delmedicine my-2 btn btn-xs btn-danger">Delete</button></div>'
    
 }




 document.getElementById("more").insertAdjacentHTML("beforeEnd",moreHtml);

 for(i=0 ;i<{{patient.medicineName.length}} ; i++ ){
    var name1="{{medicines}}"[0].name;
    document.getElementById("employeemedicineName" + i ).setAttribute("value",name1); 
 }

'{{#if compounder.completed}}'
function editProfile() {
    console.log("In edit profile");
    var name = document.getElementById('ename').value;
    var phone = document.getElementById('ephone').value;
    var address = document.getElementById('eaddress').value;
    var city = document.getElementById('ecity').value;
    var state = document.getElementById('estate').value;
    var zip = document.getElementById('ezip').value;
    axios.put('/compounder/editprofile/{{compounder._id}}', {
        name: name,
        phone: phone,
        address: address,
        city: city,
        state: state,
        zip: zip
    }).then(function(response) {
        $("#here1").load(window.location.href + " #here1");
    });
}



'{{else}}'
var addForm = document.getElementById('addFaculty');
addForm.addEventListener('submit', addfaculty);

function addfaculty(e) {
    // Prevent actual submit
    e.preventDefault();
    var name = document.getElementById('name').value;

    var phone = document.getElementById('phone').value;
    var address = document.getElementById('address').value;
    var city = document.getElementById('city').value;
    var state = document.getElementById('state').value;
    var zip = document.getElementById('zip').value;
   
    if (phone.length < 10 || phone.length > 10) {
        swal.fire({
            title: '{{error}}',
            text: "Mobile No. should have 10 digit",
            showConfirmButton: false,
            timer: 2000,
            type: "error"
        });
    }
        axios.post('/compounder/completeprofile/{{user._id}}', {
            name: name,
            phone: phone,
            address: address,
            city: city,
            state: state,
            zip: zip,
            
            
        }).then(function(response) {
            Swal.fire({
                position: 'top-end',
                type: 'success',
                title: 'Your profile has been saved',
                showConfirmButton: false,
                timer: 2000
            })
            $("#here1").load(window.location.href + " #here1");
        });
    }

'{{/if}}'


'{{#if success_msg}}'
    Swal.fire({
        position: 'top-end',
        type: 'success',
        title: '{{success_msg}}',
        showConfirmButton: false,
        timer: 2000
     })
'{{/if}}'
</script>
<script>
    window.location.href = "#compounder/#addPatients";
function changePassword() {
    var d = document.getElementById('changePasswordbox');
    d.style.display = "block";
}

var automedicinename = [];
var automediciquan = [];
var autoroll = [];
var autopf = [];
axios.get('/compounder/allmedicine/').then(function(response) {
    for (var i = 0; i < response.data.length; i++) {
        if (response.data[i].quantity > 0) {
            automedicinename.push(response.data[i].medicineName);
            automediciquan.push(response.data[i].quantity);
        }
    }
});
axios.get('/student/getroll/').then(function(response) {
    for (var i = 0; i < response.data.length; i++) {
        autoroll.push(response.data[i].rollnum);
    }
});
axios.get('/faculty/getpfnumber/').then(function(response) {
    for (var i = 0; i < response.data.length; i++) {
        autopf.push(response.data[i].pfnum);
    }
});
autocomplete(document.getElementById("medicineName0"), automedicinename, automediciquan);
autocomplete(document.getElementById("facultymedicineName0"), automedicinename, automediciquan);
autocomplete(document.getElementById("employeemedicineName0"), automedicinename, automediciquan);
autocompleteRoll(document.getElementById("rollnumber"), autoroll);


autocompletePF(document.getElementById("facultypfnumber"), autopf);
var changepassword = document.getElementById('change-Password');
changepassword.addEventListener('submit', changePass);

function changePass(e) {
    e.preventDefault();
    var password = document.getElementById('changePass').value;
    var changeConPass = document.getElementById('changeConPass').value;
    if (password != changeConPass) {
        Swal.fire({
            type: 'error',
            title: 'Error',
            text: 'Password and Confirm Password should be same!',
        })
    } else {
        axios.put('/users/changePassword/{{user._id}}', {
            password: password
        }).then(function(response) {
            var d = document.getElementById('changePasswordbox');
            d.style.display = "none";
            Swal.fire({
                position: 'top-end',
                type: 'success',
                title: 'Your password has been updated',
                showConfirmButton: false,
                timer: 2000
            })
        });
    }
}


var id = '{{compounder._id}}';
var compounderName = '{{compounder.name}}';
var addstuden = document.getElementById('add-student');
addstuden.addEventListener('submit', addStudent);
var addfaaculty = document.getElementById('add-faculty');
addfaaculty.addEventListener('submit', Addfaculty);

function addStudent(e) {
    // Prevent actual submit
    e.preventDefault();
    var rollNumber = document.getElementById('rollnumber').value;
    var rollnumber = Number(rollNumber);
    var diseases = document.getElementById('diseases').value;
    var diseaseDescription = document.getElementById('diseaseDescription').value;
    var count = document.getElementById('count').value;
    var doctorName = document.getElementById('doctorName').value;
    var patientType = "Student";
    var counter = 0;
    var medicineName = [];
    var medicineQuantity = [];
    if (count === undefined) {
        var medicine = document.getElementById("medicineName0").value;
        var quantity = document.getElementById("medicineQuantity0").value;
        medicineName.push(medicine);
        medicineQuantity.push(quantity);
    } else {
        for (var i = 0; i <= count; i++) {
            var medicine,quantity;
            if(document.getElementById("medicineName" + i) != undefined){
                  medicine = document.getElementById("medicineName" + i).value;
                  quantity = document.getElementById("medicineQuantity" + i).value;
            }else{
                continue;
            }
           
            medicineName.push(medicine);
            medicineQuantity.push(quantity);
        }
    }
    var sts;
    // Connect to socket.io
    try {
        var socket = io();
    } catch (err) {
        console.log(err.message)
    }
    // Check for connection
    if (socket !== undefined) {
        console.log('Connected to socket...');
        // Clear Message    
        axios.post('/student/getStudent', { rollnumber: rollnumber }).then(function(response) {
            var patientName = response.data.name;
            var patientEmail = response.data.email;
            var phone = response.data.phone;
            var status = document.getElementById('comments');
            var statusDefault = status.textContent;
            var setStatus = function(s) {
                // Set status
                status.textContent = s;
                if (s !== statusDefault) {
                    var delay = setTimeout(function() {
                        setStatus(statusDefault);
                    }, 4000);
                }
            }
            socket.on('status', function(data) {
                // get message status
                setStatus((typeof data === 'object') ? data.message : data);
                // If status is clear, clear text
                if (data.clear) {
                    // textarea.value = '';
                }
            });
            // Emit to server input
            socket.emit('input', {
                patientName: patientName,
                patientEmail: patientEmail,
                idnumber: rollnumber,
                medicineName: medicineName,
                relation: "N/A",
                relatedto:"N/A",
                medicineQuantity: medicineQuantity,
                diseases: diseases,
                diseaseDescription: diseaseDescription,
                patientType: patientType,
                id: id,
                name: compounderName,
                doctorName: doctorName,
                phone: response.data.phone
            });
            window.location.href = "#allPatient";
            allPatient();
            Swal.fire({
                position: 'top-end',
                type: 'success',
                title: 'Your gave medicine to ' + patientName,
                showConfirmButton: false,
                timer: 2000
            })
        })
    }
    document.getElementById('doctorName').value = '';
    document.getElementById('rollnumber').value = '';
    document.getElementById('diseases').value = '';
    document.getElementById('diseaseDescription').value = '';
    document.getElementById("medicineName0").value = '';
    document.getElementById("medicineQuantity0").value = '';
    for (var i = 0; i <= count; i++) {
        if(document.getElementById("medicineName" + i) != undefined){
            document.getElementById("medicineName" + i).value = '';
            document.getElementById("medicineQuantity" + i).value = '';
        }else{
            continue;
        }

        
    }
}


function Addfaculty(e) {
    // Prevent actual submit
    e.preventDefault();
    var pfnumber = document.getElementById('facultypfnumber').value;
    var pfnumber = Number(pfnumber);
    var diseases = document.getElementById('facultydiseases').value;
    var diseaseDescription = document.getElementById('facultydiseaseDescription').value;
    var count = document.getElementById('facultycount').value;
    var doctorName = document.getElementById('facultydoctorName').value;
    var patientType=document.getElementById('usertypes').value;
    // var patientType = "Faculty";
    var counter = 0;
    var medicineName = [];
    var medicineQuantity = [];
    if (count === undefined) {
        var medicine = document.getElementById("facultymedicineName0").value;
        var quantity = document.getElementById("facultymedicineQuantity0").value;
        medicineName.push(medicine);
        medicineQuantity.push(quantity);
    } else {
        for (var i = 0; i <= count; i++) {
            var medicine,quantity;
            if(document.getElementById("facultymedicineName" + i) != undefined){
                 medicine = document.getElementById("facultymedicineName" + i).value;
                 quantity = document.getElementById("facultymedicineQuantity" + i).value;
            }else{
                continue;
            }
            
            medicineName.push(medicine);
            medicineQuantity.push(quantity);
        }
    }
    var sts;
    // Connect to socket.io
    try {
        var socket = io();
    } catch (err) {
        console.log(err.message)
    }
    // Check for connection
    if (socket !== undefined) {
        console.log('Connected to socket...');
        // Clear Message    
        axios.post('/faculty/getfaculty', { pfnumber: pfnumber }).then(function(response) {
            var patientName = response.data.name;
            var patientEmail = response.data.email;
            var phone = response.data.phone;
            var status = document.getElementById('facultycomments');
            var statusDefault = status.textContent;
            var setStatus = function(s) {
                // Set status
                status.textContent = s;
                if (s !== statusDefault) {
                    var delay = setTimeout(function() {
                        setStatus(statusDefault);
                    }, 4000);
                }
            }
            socket.on('status', function(data) {
                // get message status
                setStatus((typeof data === 'object') ? data.message : data);
                // If status is clear, clear text
                if (data.clear) {
                    // textarea.value = '';
                }
            });
            // Emit to server input
            socket.emit('input', {
                patientName: patientName,
                patientEmail: patientEmail,
                idnumber: pfnumber,
                relation: "N/A",
                relatedto:"N/A",
                medicineName: medicineName,
                medicineQuantity: medicineQuantity,
                diseases: diseases,
                diseaseDescription : diseaseDescription,
                patientType: patientType,
                id: id,
                name: compounderName,
                doctorName: doctorName,
                phone: response.data.phone
            });
            window.location.href = "#allPatient";
            allPatient();
            Swal.fire({
                position: 'top-end',
                type: 'success',
                title: 'Your gave medicine to ' + patientName,
                showConfirmButton: false,
                timer: 2000
            })
        })
    }
    document.getElementById('facultydoctorName').value = '';
    document.getElementById('facultypfnumber').value = '';
    document.getElementById('facultydiseases').value = '';
    document.getElementById('facultydiseaseDescription').value = '';
    document.getElementById("facultymedicineName0").value = '';
    document.getElementById("facultymedicineQuantity0").value = '';
    for (var i = 0; i <= facultycount; i++) {
        var medicine,quantity;
        if(document.getElementById("facultymedicineName" + i) != undefined){
              document.getElementById("facultymedicineName" + i).value = '';
            document.getElementById("facultymedicineQuantity" + i).value = '';
        }else{
            continue;
        }
      
    }
}

var Addemployee = document.getElementById('addemp');
Addemployee.addEventListener('submit', addEmployee);

function addEmployee(e) {
    // Prevent actual submit
    e.preventDefault();
    var employeeName = document.getElementById('employeeName').value;
    var relatedto = document.getElementById('relatedto').value;
    var relation = document.getElementById('relation').value;
    var pfnumber = document.getElementById('pfnumber').value;
    var employeediseases = document.getElementById('employeediseases').value;
    var diseaseDescription = document.getElementById('employeediseaseDescription').value;
    var employeeEmail = document.getElementById('employeeEmail').value;
    var employeecount = document.getElementById('employeecount').value;
    var doctorName = document.getElementById('employeedoctorName').value;
    var phone = document.getElementById('phone').value;
    var patientType = "Employee";    
    var counter = 0;
    if (phone.length < 10) {
        var message = document.getElementById('errorMessages');
        document.getElementById('errPhone').innerHTML = "Mobile No. should have 10 numbers";
        errorMessages.style.display = "block";
    } else {
        var employeemedicineName = [];
        var employeemedicineQuantity = [];
        if (employeecount === undefined) {
            var medicine = document.getElementById("employeemedicineName0").value;
            var quantity = document.getElementById("employeemedicineQuantity0").value;
            employeemedicineName.push(medicine);
            employeemedicineQuantity.push(quantity);
        } else {
            for (var i = 0; i <= employeecount; i++) {
                var medicine,quantity;
                if(document.getElementById("employeemedicineName" + i) != undefined){
                     medicine = document.getElementById("employeemedicineName" + i).value;
                   quantity = document.getElementById("employeemedicineQuantity" + i).value;
              
                }else{
                    continue;
                }

                  employeemedicineName.push(medicine);
                employeemedicineQuantity.push(quantity);
            }
        }
        var sts;
        // Connect to socket.io
        try {
            var socket = io();
        } catch (err) {
          
            console.log(err.message)
        }
        // Check for connection
        if (socket !== undefined) {
            console.log('Connected to socket...');
            // Clear Message    
            var status = document.getElementById('employeecomments');
            var statusDefault = status.textContent;
            var setStatus = function(s) {
                // Set status
                status.textContent = s;
                if (s !== statusDefault) {
                    var delay = setTimeout(function() {
                        setStatus(statusDefault);
                    }, 4000);
                }
            }
            socket.on('status', function(data) {
                // get message status
                setStatus((typeof data === 'object') ? data.message : data);
                // If status is clear, clear text
                if (data.clear) {
                    // textarea.value = '';
                }
            });
            // Emit to server input
            socket.emit('input', {
                patientName: employeeName,
                idnumber: pfnumber,
                medicineName: employeemedicineName,
                medicineQuantity: employeemedicineQuantity,
                diseases: employeediseases,
                diseaseDescription : diseaseDescription,
                patientEmail: employeeEmail,
                patientType: patientType,
                id: id,
                relatedto: relatedto,
                relation:relation,
                name: compounderName,
                doctorName: doctorName,
                phone: phone
            });
        }
        allPatient();
        Swal.fire({
            position: 'top-end',
            type: 'success',
            title: 'Your gave medicine to ' + employeeName,
            showConfirmButton: false,
            timer: 2000
        })
        document.getElementById('employeeName').value = '';
        document.getElementById('pfnumber').value = '';
        document.getElementById('relation').value = '';
        document.getElementById('relatedto').value = '';
        document.getElementById('employeediseases').value = '';
        document.getElementById('employeediseaseDescription').value = '';
        document.getElementById("employeemedicineName0").value = '';
        document.getElementById("employeemedicineQuantity0").value = '';
        document.getElementById('employeeEmail').value = '';
        document.getElementById('employeedoctorName').value = '';
        document.getElementById('phone').value = '';
        for (var i = 0; i <= employeecount; i++) {
            if(document.getElementById("employeemedicineName" + i) != undefined){
                document.getElementById("employeemedicineName" + i).value = '';
                document.getElementById("employeemedicineQuantity" + i).value = '';
            
            }else{
                continue;
            }
            }
    }
}


var addMedicine = document.getElementById('add-medicine');
addMedicine.addEventListener('submit', addMedicines);

function addMedicines(e) {
    // Prevent actual submit
    e.preventDefault();
    var medicineName = document.getElementById('amedicineName').value;
    var medicinePrice = document.getElementById('amedicinePrice').value;
    var medicineQuantity = document.getElementById('amedicineQuantity').value;
    var companyName = document.getElementById('companyName').value;
    axios.post('/compounder/addMedicine/{{compounder._id}}', {
        medicineName: medicineName,
        medicineQuantity: medicineQuantity,
        companyName: companyName,
        price: medicinePrice
    }).then(function(response) {
        Swal.fire({
            position: 'top-end',
            type: 'success',
            title: 'Medicine has been addded',
            showConfirmButton: false,
            timer: 2000
        })
        allPatient();
        document.getElementById('amedicineName').value = '';
        document.getElementById('amedicineQuantity').value = '';
        document.getElementById('companyName').value = '';
        document.getElementById('amedicineName').value = '';
    });
}


function getAllMedicines() {
    window.location.href = "#compounder/#allMedicines";
    axios.get('/compounder/allmedicines/').then(function(response) {
        var codeBlock = '<table class="table table-hover table-bordered"> <thead><tr><th scope="col">Company</th>'+
                                                             '<th scope="col">Name </th>'+
                                                             '<th scope="col">Quantity </th>'+
                                                             '<th scope="col">In hand Quantity </th>'+
                                                             '<th scope="col">Price</th></tr></thead>';
        for (var i = 0; i < response.data.length; i++) {
            codeBlock += 
                // '<div class="box box-primary">' +
                // '<div class="box-body box-profile">' +
                // '<img class="profile-user-img img-responsive img-circle" src="/image/medicine.png" alt="User profile picture"><br>' +
                // '<ul class="list-group list-group-unbordered">' +
                // '<a href="#" class="list-group-item">' +
                // '<b style="color : #566573">Company</b> <div class="pull-right">' + response.data[i].companyName + '</div>' +
                // '</a>' +
                // '<a href="#" class="list-group-item">' +
                // '<b style="color : #566573">Medicine</b> <div class="pull-right">' + response.data[i].medicineName + '</div>' +
                // '</a><br>' +
                // '<a href="#" class="list-group-item">' +
                // '<b style="color : #566573">Ordered Quantity</b> <div class="pull-right">' + response.data[i].medicineQuantity + '</div>' +
                // '</a>' +
                // '<a href="#" class="list-group-item">' +
                // '<b style="color : #566573">In hand</b> <div class="pull-right">' + response.data[i].quantity + '</div>' +
                // '</a>' +
                // '<a href="#" class="list-group-item">' +
                // '<b style="color : #566573">Price</b> <div class="pull-right">' + response.data[i].price + '</div>' +
                // '</a>' +
                // '</ul>' +

                // '</div>' +
                // '</div>' +
                // '</div>'
                '<tr class="filterable"> <td class="text-center">' + response.data[i].companyName + '</td> '+
                '<td class="text-center">' + response.data[i].medicineName + '</td> '+
                '<td class="text-center">' + response.data[i].medicineQuantity + '</td> '+
                '<td class="text-center">' + response.data[i].quantity + '</td> '+
                '<td class="text-center">' + 'Rs ' + response.data[i].price + '</td> </tr>'

        }

        codeBlock += '</table>'
        document.getElementById("wrappers").innerHTML = codeBlock;
    })
}

function myProfile() {
    window.location.href = "#compounder/#profile";
}

function allPatient() {
    window.location.href = "#compounder/#allPatient";
    $("#studentInformation").load(window.location.href + " #studentInformation");
    $("#employeeInformation").load(window.location.href + " #employeeInformation");
    $("#facultyInformation").load(window.location.href + " #facultyInformation");
    $("#researchInformation").load(window.location.href + " #researchInformation");
    $("#projectInformation").load(window.location.href + " #projectInformation");
    $("#officeInformation").load(window.location.href + " #officeInformation");
    $("#otherInformation").load(window.location.href + " #otherInformation");
}

function addPatients() {
    window.location.href = "#compounder/#addpatient";
}

function caddMedicine() {
    window.location.href = "#compounder/#addmedicine";
}

window.onload = function() {
    axios.get('/compounder/allmedicine').then(function(response) {
        var dataPoints1 = [];
        var dataPoints2 = [];
        var dataPoints3 = [];
        var maximum;
	var max = [];
	var minimum = response.data[0].medicineName;
        var len = response.data.length;


        for (var i = 0; i < len; i++) {
            var medicine1 = {};
            var medicine2 = {};
            var medicine3 = {};
            medicine1.label = response.data[i].medicineName;
            medicine3.label = response.data[i].medicineName;
            medicine3.y = response.data[i].price;
            medicine1.y = response.data[i].medicineQuantity;
            medicine2.y = response.data[i].quantity;
            dataPoints1.push(medicine1);
            dataPoints2.push(medicine2);
            dataPoints3.push(medicine3);
            max.push(response.data[i].medicineQuantity);
        }
	maximum = max[0];
        var chart = new CanvasJS.Chart("chartContainer", {
            exportEnabled: true,
            animationEnabled: true,
            title: {
                text: "Ordered and In Stock Medicine"
            },
            axisY: {
                title: "Ordered Quantity - Units",
                titleFontColor: "#4F81BC",
                lineColor: "#4F81BC",
                labelFontColor: "#4F81BC",
                tickColor: "#4F81BC",
		maximum : maximum
            },
            axisY2: {
                title: "In Stock - Units",
                titleFontColor: "#C0504E",
                lineColor: "#C0504E",
                labelFontColor: "#C0504E",
                tickColor: "#C0504E",
		maximum : maximum
            },
            toolTip: {
                shared: true
            },
            legend: {
                cursor: "pointer",
                itemclick: toggleDataSeries
            },
            data: [{
                    type: "column",
                    name: "Ordered Quantity",
                    showInLegend: true,
                    yValueFormatString: "#,##0.# Units",
                    dataPoints: dataPoints1

                },
                {
                    type: "column",
                    name: "In Stock",
                    axisYType: "secondary",
                    showInLegend: true,
                    yValueFormatString: "#,##0.# Units",
                    dataPoints: dataPoints2
                }
            ]
        });
        chart.render();

        function toggleDataSeries(e) {
            if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
                e.dataSeries.visible = false;
            } else {
                e.dataSeries.visible = true;
            }
            e.chart.render();
        }
        var chart2 = new CanvasJS.Chart("chartContainer2", {
            animationEnabled: true,
            exportEnabled: true,
            title: {
                text: "Medicines name and its Prices"
            },
            data: [{
                type: "column",
                dataPoints: dataPoints3
            }]
        });
        chart2.render();
    });
    window.location.href = "#compounder/#graphs";
}


var addstatus = document.getElementById('change-status');
addstatus.addEventListener('submit', addStatus);

function addStatus(e){
    e.preventDefault();
    var socket;
    try{
         socket = io();
    }catch(err){
        console.log(err);
    }
    var res = document.getElementById('presence').value;
        var  statuspre;
        if(res == "N"){
            statuspre = "No";
        }
        if(res == "Y"){
           statuspre = "Yes";
        }

    if(socket !== undefined){
        console.log("socket on baby");
        
        console.log("connected to socket")
        var id = '{{compounder.name}}'+'{{compounder.email}}'; 
        socket.emit('inOffice',{
            inOffice : statuspre,
            name : '{{compounder.name}}',
            id : id,

        });
}    
    // var res = document.getElementById('presence').value;
    // var  statuspre;
    // if(res == "N"){
    //     statuspre = false;
    // }
    // if(res == "Y"){
    //    statuspre = true;
    // }
    // console.log("Status is  : " + statuspre);
    //  console.log("result is  : " + res);

    // axios.put('/compounder/setstatus/{{compounder._id}}', {
    //    statuspre : statuspre
    // }).then(function(response) {
    //       Swal.fire({
    //         position: 'top-end',
    //         type: 'success',
    //         title: 'Your Status is saved',
    //         showConfirmButton: false,
    //         timer: 2000
    //       })  
    //  });
}



function autocomplete(inp, arrmed, arrquan) {
    /*the autocomplete function takes two arguments,
    the text field element and an array of possible autocompleted values:*/
    var currentFocus;
    /*execute a function when someone writes in the text field:*/
    inp.addEventListener("input", function(e) {
        var a, b, i, val = this.value;
        /*close any already open lists of autocompleted values*/
        closeAllLists();
        if (!val) { return false; }
        currentFocus = -1;
        /*create a DIV element that will contain the items (values):*/
        //apeending same as in the input siblings
        a = document.createElement("DIV");
        a.setAttribute("id", this.id + "autocomplete-list");
        a.setAttribute("class", "autocomplete-items");
        /*append the DIV element as a child of the autocomplete container:*/
        this.parentNode.appendChild(a);
        var count2 = 0;
        /*for each item in the array...*/
        for (i = 0; i < arrmed.length; i++) {
            /*check if the item starts with the same letters as the text field value:*/
             var str = arrmed[i];
            var quan = arrquan[i];
            //checking if the entered input matches any medicine in our array
            if (str.substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                /*create a DIV element for each matching element:*/
                count2++;
                b = document.createElement("DIV");
                /*make the matching letters bold:*/
                b.innerHTML = "<strong>" + str.substr(0, val.length) + "</strong>";
                b.innerHTML += str.substr(val.length) + " " + "<div class='pull-right' style='padding-top : 0px'>In hand : " + "<b>" + quan + "</b>" + "</div>";
                /*insert a input field that will hold the current array item's value:*/
                b.innerHTML += "<input type='hidden' value='" + str + "'>";
                /*execute a function when someone clicks on the item value (DIV element):*/
                b.addEventListener("click", function(e) {
                    /*insert the value for the autocomplete text field:*/
                    inp.value = this.getElementsByTagName("input")[0].value;
                    var ind = arrmed.indexOf(inp.value);
                    var maxinput = document.getElementById('medicineQuantity0');
                    maxinput.setAttribute('max', arrquan[ind]);
                    /*close the list of autocompleted values,
                    (or any other open lists of autocompleted values:*/
                    closeAllLists();
                });
                a.appendChild(b);
                var showdisable = document.getElementById('showdisable');
                var hideSubmit = document.getElementById('show');
                var facultyshowdisable = document.getElementById('facultyshowdisable');
                var facultyhideSubmit = document.getElementById('facultyshow');
                var employeeshowdisable = document.getElementById('employeeshowdisable');
                var hideSubmitemployee = document.getElementById('employeeshow');
                hideSubmit.style.display = "block";
                showdisable.style.display = "none";
                hideSubmitemployee.style.display = "block";
                employeeshowdisable.style.display = "none";
                facultyhideSubmit.style.display = "block";
                facultyshowdisable.style.display = "none";
            }

        }
        if (count2 === 0) {
            b = document.createElement("DIV");
            b.innerHTML = "<strong>No Medicine found with this name</strong>";
            a.appendChild(b);
            var showdisable = document.getElementById('showdisable');
            var hideSubmit = document.getElementById('show');
            var facultyshowdisable = document.getElementById('facultyshowdisable');
            var facultyhideSubmit = document.getElementById('facultyshow');
            var employeeshowdisable = document.getElementById('employeeshowdisable');
            var hideSubmitemployee = document.getElementById('employeeshow');
            hideSubmit.style.display = "none";
            showdisable.style.display = "block";
            hideSubmitemployee.style.display = "none";
            employeeshowdisable.style.display = "block";
            facultyhideSubmit.style.display = "none";
            facultyshowdisable.style.display = "block";

        }
    });
    /*execute a function presses a key on the keyboard:*/
    inp.addEventListener("keydown", function(e) {
        var x = document.getElementById(this.id + "autocomplete-list");
        if (x) x = x.getElementsByTagName("div");
        if (e.keyCode == 40) {
            /*If the arrow DOWN key is pressed,
            increase the currentFocus variable:*/
            currentFocus++;
            /*and and make the current item more visible:*/
            addActive(x);
        } else if (e.keyCode == 38) { //up
            /*If the arrow UP key is pressed,
            decrease the currentFocus variable:*/
            currentFocus--;
            /*and and make the current item more visible:*/
            addActive(x);
        } else if (e.keyCode == 13) {
            /*If the ENTER key is pressed, prevent the form from being submitted,*/
            e.preventDefault();
            if (currentFocus > -1) {
                /*and simulate a click on the "active" item:*/
                if (x) x[currentFocus].click();
            }
        }
    });

    function addActive(x) {
        /*a function to classify an item as "active":*/
        if (!x) return false;
        /*start by removing the "active" class on all items:*/
        removeActive(x);
        if (currentFocus >= x.length) currentFocus = 0;
        if (currentFocus < 0) currentFocus = (x.length - 1);
        /*add class "autocomplete-active":*/
        x[currentFocus].classList.add("autocomplete-active");
    }


    function removeActive(x) {
        /*a function to remove the "active" class from all autocomplete items:*/
        for (var i = 0; i < x.length; i++) {
            x[i].classList.remove("autocomplete-active");
        }
    }







    function closeAllLists(elmnt) {
        /*close all autocomplete lists in the document,
        except the one passed as an argument:*/
        var x = document.getElementsByClassName("autocomplete-items");
        for (var i = 0; i < x.length; i++) {
            if (elmnt != x[i] && elmnt != inp) {
                x[i].parentNode.removeChild(x[i]);
            }
        }
    }
    /*execute a function when someone clicks in the document:*/
    document.addEventListener("click", function(e) {
        closeAllLists(e.target);
    });
}


function autocompleteRoll(inp, arrmed) {

    /*the autocomplete function takes two arguments,
    the text field element and an array of possible autocompleted values:*/
    var currentFocus;
    /*execute a function when someone writes in the text field:*/
    inp.addEventListener("input", function(e) {
        var a, b, i, val = this.value;
        /*close any already open lists of autocompleted values*/
        closeAllLists();
        if (!val) { return false; }
        currentFocus = -1;
        /*create a DIV element that will contain the items (values):*/
        a = document.createElement("DIV");
        a.setAttribute("id", this.id + "autocomplete-list");
        a.setAttribute("class", "autocomplete-items");

        /*append the DIV element as a child of the autocomplete container:*/
        this.parentNode.appendChild(a);
        var count2 = 0;
        /*for each item in the array...*/
        for (i = 0; i < arrmed.length; i++) {
            /*check if the item starts with the same letters as the text field value:*/
            var str = arrmed[i].toString();
            if (str.substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                /*create a DIV element for each matching element:*/
                count2++;
                b = document.createElement("DIV");
                /*make the matching letters bold:*/
                b.innerHTML = "<strong>" + str.substr(0, val.length) + "</strong>";
                b.innerHTML += str.substr(val.length);
                /*insert a input field that will hold the current array item's value:*/
                b.innerHTML += "<input type='hidden' value='" + str + "'>";
                /*execute a function when someone clicks on the item value (DIV element):*/
                b.addEventListener("click", function(e) {
                    /*insert the value for the autocomplete text field:*/
                    inp.value = this.getElementsByTagName("input")[0].value;
                    /*close the list of autocompleted values,
                    (or any other open lists of autocompleted values:*/
                    closeAllLists();
                });
                a.appendChild(b);
            }
        }

        if (count2 === 0) {
            b = document.createElement("DIV");
            b.innerHTML = "<strong>Roll Number Not Found</strong>";
            a.appendChild(b);
            document.getElementById("rollnumber").value = "";
        }
    });
    /*execute a function presses a key on the keyboard:*/
    inp.addEventListener("keydown", function(e) {
        var x = document.getElementById(this.id + "autocomplete-list");
        if (x) x = x.getElementsByTagName("div");
        if (e.keyCode == 40) {
            /*If the arrow DOWN key is pressed,
            increase the currentFocus variable:*/
            currentFocus++;
            /*and and make the current item more visible:*/
            addActive(x);
        } else if (e.keyCode == 38) { //up
            /*If the arrow UP key is pressed,
            decrease the currentFocus variable:*/
            currentFocus--;
            /*and and make the current item more visible:*/
            addActive(x);
        } else if (e.keyCode == 13) {
            /*If the ENTER key is pressed, prevent the form from being submitted,*/
            e.preventDefault();
            if (currentFocus > -1) {
                /*and simulate a click on the "active" item:*/
                if (x) x[currentFocus].click();
            }
        }
    });

    function addActive(x) {
        /*a function to classify an item as "active":*/
        if (!x) return false;
        /*start by removing the "active" class on all items:*/
        removeActive(x);
        if (currentFocus >= x.length) currentFocus = 0;
        if (currentFocus < 0) currentFocus = (x.length - 1);
        /*add class "autocomplete-active":*/
        x[currentFocus].classList.add("autocomplete-active");
    }

    function removeActive(x) {
        /*a function to remove the "active" class from all autocomplete items:*/
        for (var i = 0; i < x.length; i++) {
            x[i].classList.remove("autocomplete-active");
        }
    }

    function closeAllLists(elmnt) {
        /*close all autocomplete lists in the document,
        except the one passed as an argument:*/
        var x = document.getElementsByClassName("autocomplete-items");
        for (var i = 0; i < x.length; i++) {
            if (elmnt != x[i] && elmnt != inp) {
                x[i].parentNode.removeChild(x[i]);
            }
        }
    }
    /*execute a function when someone clicks in the document:*/
    document.addEventListener("click", function(e) {
        closeAllLists(e.target);
    });
}


function autocompletePF(inp, arrmed) {

    /*the autocomplete function takes two arguments,
    the text field element and an array of possible autocompleted values:*/
    var currentFocus;
    /*execute a function when someone writes in the text field:*/
    inp.addEventListener("input", function(e) {
        var a, b, i, val = this.value;
        /*close any already open lists of autocompleted values*/
        closeAllLists();
        if (!val) { return false; }
        currentFocus = -1;
        /*create a DIV element that will contain the items (values):*/
        a = document.createElement("DIV");
        a.setAttribute("id", this.id + "autocomplete-list");
        a.setAttribute("class", "autocomplete-items");

        /*append the DIV element as a child of the autocomplete container:*/
        this.parentNode.appendChild(a);
        var count2 = 0;
        /*for each item in the array...*/
        for (i = 0; i < arrmed.length; i++) {
            /*check if the item starts with the same letters as the text field value:*/
            var str = arrmed[i].toString();
            if (str.substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                /*create a DIV element for each matching element:*/
                count2++;
                b = document.createElement("DIV");
                /*make the matching letters bold:*/
                b.innerHTML = "<strong>" + str.substr(0, val.length) + "</strong>";
                b.innerHTML += str.substr(val.length);
                /*insert a input field that will hold the current array item's value:*/
                b.innerHTML += "<input type='hidden' value='" + str + "'>";
                /*execute a function when someone clicks on the item value (DIV element):*/
                b.addEventListener("click", function(e) {
                    /*insert the value for the autocomplete text field:*/
                    inp.value = this.getElementsByTagName("input")[0].value;
                    /*close the list of autocompleted values,
                    (or any other open lists of autocompleted values:*/
                    closeAllLists();
                });
                a.appendChild(b);
            }
        }

        if (count2 === 0) {
            b = document.createElement("DIV");
            b.innerHTML = "<strong> PF Number Not Found</strong>";
            a.appendChild(b);
            document.getElementById("facultypfnumber").value = "";
        }
    });
    /*execute a function presses a key on the keyboard:*/
    inp.addEventListener("keydown", function(e) {
        var x = document.getElementById(this.id + "autocomplete-list");
        if (x) x = x.getElementsByTagName("div");
        if (e.keyCode == 40) {
            /*If the arrow DOWN key is pressed,
            increase the currentFocus variable:*/
            currentFocus++;
            /*and and make the current item more visible:*/
            addActive(x);
        } else if (e.keyCode == 38) { //up
            /*If the arrow UP key is pressed,
            decrease the currentFocus variable:*/
            currentFocus--;
            /*and and make the current item more visible:*/
            addActive(x);
        } else if (e.keyCode == 13) {
            /*If the ENTER key is pressed, prevent the form from being submitted,*/
            e.preventDefault();
            if (currentFocus > -1) {
                /*and simulate a click on the "active" item:*/
                if (x) x[currentFocus].click();
            }
        }
    });

    function addActive(x) {
        /*a function to classify an item as "active":*/
        if (!x) return false;
        /*start by removing the "active" class on all items:*/
        removeActive(x);
        if (currentFocus >= x.length) currentFocus = 0;
        if (currentFocus < 0) currentFocus = (x.length - 1);
        /*add class "autocomplete-active":*/
        x[currentFocus].classList.add("autocomplete-active");
    }

    function removeActive(x) {
        /*a function to remove the "active" class from all autocomplete items:*/
        for (var i = 0; i < x.length; i++) {
            x[i].classList.remove("autocomplete-active");
        }
    }

    function closeAllLists(elmnt) {
        /*close all autocomplete lists in the document,
        except the one passed as an argument:*/
        var x = document.getElementsByClassName("autocomplete-items");
        for (var i = 0; i < x.length; i++) {
            if (elmnt != x[i] && elmnt != inp) {
                x[i].parentNode.removeChild(x[i]);
            }
        }
    }
    /*execute a function when someone clicks in the document:*/
    document.addEventListener("click", function(e) {
        closeAllLists(e.target);
    });
}



</script>
